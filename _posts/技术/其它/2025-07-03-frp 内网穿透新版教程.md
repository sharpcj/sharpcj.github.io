---
layout: post
title: "frp 内网穿透 0.63.0 教程"
date:   2025-07-03 00:02:07 +0800
categories: ["技术", "其它"]
tag: ["内网穿透", "frp"]
---

# 一、资源
一台具有公网 IP 的云服务器

# 二、安装 frp
## 2.1 服务端与客户端
简单理解，frp 原理是通过服务端与客户端程序进行数据转发。具有公网 ip 的服务器充当服务端角色，需要进行内网穿透的个人电脑充当客户端角色。

## 2.2 安装
我这边下载了最新版的 frp 程序。可以到 github 上下载 frp 的 release 包。
我这里服务端是 Linux 系统，客户端是 Windows 系统，分别下载对应的包即可。该包解压就可以使用，无需安装。

## 2.3 配置并启动 frp 进程
在使用之前，需要进行一些配置。不同版本配置文件格式不一致，早起可能是 `.ini` 或其它格式。本文以当前最新版 0.63.0 版本为例，配置文件是 `toml` 格式。
服务端配置文件 `frps.toml`。
```
bindAddr = "0.0.0.0" # 服务端监听地址，用于接收 frpc 的连接。默认监听 0.0.0.0， 表示监听所有网络接口。
bindPort = 7000 # 服务端监听端口，默认值为 7000，客户端通过此端口连接。
vhostHTTPPort = 7001 # 接收http请求
auth.token = "myfrptoken" # 客户端需要配置对应的token才允许映射

#仅允许服务器上的指定端口/端口范围 避免滥用端口
allowPorts = [
  # 范围指定
  { start = 5000, end = 5500},
  # 单独指定
  # { single = 5501},
]

# 仪表盘配置
# The default value is 127.0.0.1. Change it to 0.0.0.0 when you want to access it from a public network.
webServer.addr = "0.0.0.0"
webServer.port = 7002
webServer.user = "admin"
webServer.password = "admin"
```

服务端配置完成之后，通过 `./frps -c ./frps.toml` 启动。启动之前，记得把公网服务器的 `7000`, `7001`, 的端口打开， `5000-5500` 用到哪个打开哪个。一般可以通过购买的服务器的控制台进行设置。


客户端配置文件为 `frpc.toml`。
```
serverAddr = "你的服务器 ip"
serverPort = 7000  # 和服务端进行通信的端口，与服务端 bindPort 保持一致。
auth.token = "myfrptoken" # token 校验，和服务端保持一致。

[[proxies]]
name = "comfyui" # 要映射的服务名，随便起。比如我想映射本机的 comfyui 进程。
type = "tcp"
localIP = "0.0.0.0"
localPort = 8188 # 本机需要映射的端口，比如本机 comfyui 进程端口是 8188
remotePort = 5000 #映射到云服务器的哪个端口，需要打开服务器的这个端口。
```

客户端的 proxies 可以配置多个。针对不沟通的服务，启动不同的端口即可。

其它网络通过 `http://云服务器ip:remotePort` 即可访问你本地机器 localPort 对应的进程。

## 2.4 其它
可以将服务端和客户端程序，设置为开机启动。